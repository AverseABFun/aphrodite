function get_version() {
    local TEMP_SUFFIX
    if git diff-index HEAD -- 2>&1 > /dev/null
    then
        TEMP_SUFFIX="-out-of-tree"
    fi
    SUFFIX="$SUFFIX$TEMP_SUFFIX"

    VERSION="${VERSION:-devel-$(git rev-parse --short HEAD)$SUFFIX}"
    if [[ "$VERSION" == "generate" ]]; then
        VERSION="devel-$(git rev-parse --short HEAD)$SUFFIX"
    fi
}

function reset_version_vars() {
    unset TEMP_SUFFIX SUFFIX VERSION
}